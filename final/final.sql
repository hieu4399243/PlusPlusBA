-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`USERS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`USERS` (
  `USER_PHONE` INT NOT NULL,
  `USER_NAME` VARCHAR(45) NULL,
  `PASSWORD` VARCHAR(45) NULL,
  `EMAIL` VARCHAR(45) NULL,
  `LIKED_USER_ID` INT NOT NULL,
  PRIMARY KEY (`USER_PHONE`),
  INDEX `fk_USERS_LIKED1_idx` (`LIKED_USER_ID` ASC) VISIBLE,
  CONSTRAINT `fk_USERS_LIKED1`
    FOREIGN KEY (`LIKED_USER_ID`)
    REFERENCES `mydb`.`LIKED` (`USER_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`PUBLISHED_YEAR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PUBLISHED_YEAR` (
  `BOOK_ID` INT NOT NULL,
  `PUBLISHED_YEAR` YEAR(4) NULL,
  `QUANTILY` INT NULL,
  `ADDRESS` VARCHAR(45) NULL,
  `BOOK_NAME` VARCHAR(45) NULL,
  PRIMARY KEY (`BOOK_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`AUTHOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`AUTHOR` (
  `AUTHOR_ID` INT NOT NULL,
  `NAME_AUTHOR` VARCHAR(45) NULL,
  `ADDRESS` VARCHAR(45) NULL,
  `EMAIL` VARCHAR(45) NULL,
  PRIMARY KEY (`AUTHOR_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`BOOKS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`BOOKS` (
  `BOOK_ID` INT NOT NULL,
  `BOOK_NAME` VARCHAR(45) NULL,
  `TITTLE` VARCHAR(45) NULL,
  `DECRIPTION` VARCHAR(45) NULL,
  `PRICE` BIGINT NULL,
  `UPDATE_TIME` TIMESTAMP NULL,
  `LAST_UPDATED` TIMESTAMP NULL,
  `PUBLISHED_YEAR_BOOK_ID` INT NOT NULL,
  `AUTHOR_AUTHOR_ID` INT NOT NULL,
  PRIMARY KEY (`BOOK_ID`),
  INDEX `fk_BOOKS_PUBLISHED_YEAR1_idx` (`PUBLISHED_YEAR_BOOK_ID` ASC) VISIBLE,
  INDEX `fk_BOOKS_AUTHOR1_idx` (`AUTHOR_AUTHOR_ID` ASC) VISIBLE,
  CONSTRAINT `fk_BOOKS_PUBLISHED_YEAR1`
    FOREIGN KEY (`PUBLISHED_YEAR_BOOK_ID`)
    REFERENCES `mydb`.`PUBLISHED_YEAR` (`BOOK_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_BOOKS_AUTHOR1`
    FOREIGN KEY (`AUTHOR_AUTHOR_ID`)
    REFERENCES `mydb`.`AUTHOR` (`AUTHOR_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SUBCATEGORY`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`SUBCATEGORY` (
  `SUBCATEGORY_ID` INT NOT NULL,
  `BOOK_ID` INT NULL,
  `NAME` VARCHAR(45) NULL,
  PRIMARY KEY (`SUBCATEGORY_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`LIKED`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`LIKED` (
  `USER_ID` INT NOT NULL,
  `USER_NAME` NVARCHAR(45) NULL,
  `QUANTITY` VARCHAR(45) NULL,
  `BOOK_NAME` VARCHAR(45) NULL,
  PRIMARY KEY (`USER_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`USERS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`USERS` (
  `USER_PHONE` INT NOT NULL,
  `USER_NAME` VARCHAR(45) NULL,
  `PASSWORD` VARCHAR(45) NULL,
  `EMAIL` VARCHAR(45) NULL,
  `LIKED_USER_ID` INT NOT NULL,
  PRIMARY KEY (`USER_PHONE`),
  INDEX `fk_USERS_LIKED1_idx` (`LIKED_USER_ID` ASC) VISIBLE,
  CONSTRAINT `fk_USERS_LIKED1`
    FOREIGN KEY (`LIKED_USER_ID`)
    REFERENCES `mydb`.`LIKED` (`USER_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SUB_BOOK`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`SUB_BOOK` (
  `BOOKS_BOOK_ID` INT NOT NULL,
  `SUBCATEGORY_SUBCATEGORY_ID` INT NOT NULL,
  INDEX `fk_SUB_BOOK_BOOKS1_idx` (`BOOKS_BOOK_ID` ASC) VISIBLE,
  INDEX `fk_SUB_BOOK_SUBCATEGORY1_idx` (`SUBCATEGORY_SUBCATEGORY_ID` ASC) VISIBLE,
  CONSTRAINT `fk_SUB_BOOK_BOOKS1`
    FOREIGN KEY (`BOOKS_BOOK_ID`)
    REFERENCES `mydb`.`BOOKS` (`BOOK_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_SUB_BOOK_SUBCATEGORY1`
    FOREIGN KEY (`SUBCATEGORY_SUBCATEGORY_ID`)
    REFERENCES `mydb`.`SUBCATEGORY` (`SUBCATEGORY_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`OWN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`OWN` (
  `USERS_USER_PHONE` INT NOT NULL,
  `BOOKS_BOOK_ID` INT NOT NULL,
  PRIMARY KEY (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`),
  INDEX `fk_OWN_BOOKS1_idx` (`BOOKS_BOOK_ID` ASC) VISIBLE,
  CONSTRAINT `fk_OWN_USERS1`
    FOREIGN KEY (`USERS_USER_PHONE`)
    REFERENCES `mydb`.`USERS` (`USER_PHONE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OWN_BOOKS1`
    FOREIGN KEY (`BOOKS_BOOK_ID`)
    REFERENCES `mydb`.`BOOKS` (`BOOK_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

INSERT INTO `mydb`.`author` (`AUTHOR_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('1', 'NGUYỄN DU', 'HẢI PHÒNG', 'DU123@GMAIL.COM');
INSERT INTO `mydb`.`author` (`AUTHOR_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('2', 'NGUYỄN TRÃI', 'HÀ NỘI', 'TRAINX@GMAIL.COM');
INSERT INTO `mydb`.`author` (`AUTHOR_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('3', 'DA CÁT LƯỢNG', 'TỨ XUYÊN', 'LUONG1234@GMAIL.COM');
INSERT INTO `mydb`.`author` (`AUTHOR_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('4', 'LƯU BỊ', 'TỨ XUYÊN', 'LUUB24@GMAIL.COM');
INSERT INTO `mydb`.`author` (`AUTHOR_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('5', 'QUAN VŨ', 'GIANG ĐÔNG', 'VU@GMAIL.COM');
INSERT INTO `mydb`.`author` (`AUTHOR_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('6', 'TÔN QUYỀN', 'GIANG ĐÔNG', 'QUYEN@GMAIL.COM');


INSERT INTO `mydb`.`books` (`BOOK_ID`, `BOOK_NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_AUTHOR_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('1', 'LÃO HẠC', 'VĂN HỌC', 'TIỂU THUYẾT', '5000', '2020-11-12 ', '2020-12-15 ', '1', '1');
INSERT INTO `mydb`.`books` (`BOOK_ID`, `BOOK_NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_AUTHOR_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('2', 'SÁT THỦ VÀ CÔ GÁI', 'VĂN HỌC', 'TRINH THÁM', '9000', '2019-05-10', '2019-06-12', '2', '2');
INSERT INTO `mydb`.`books` (`BOOK_ID`, `BOOK_NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_AUTHOR_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('3', 'YÊU KHÔNG CẦN NÓI', 'VĂN HỌC', 'NGÔN TÌNH', '8000', '2020-05-12', '2020-07-12', '3', '3');
INSERT INTO `mydb`.`books` (`BOOK_ID`, `BOOK_NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_AUTHOR_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('4', 'GIỌT ĐẮNG', 'VĂN HỌC', 'TIỂU THUYẾT', '10000', '2020-05-13', '2021-06-12', '4', '4');
INSERT INTO `mydb`.`books` (`BOOK_ID`, `BOOK_NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_AUTHOR_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('5', 'LỆ RƠI', 'VĂN HỌC', 'NGÔN TÌNH', '6000', '2020-11-10', '2021-01-01', '5', '5');
INSERT INTO `mydb`.`books` (`BOOK_ID`, `BOOK_NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_AUTHOR_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('6', 'BÀN VỀ CÁCH DÙNG BINH', 'VĂN HỌC', 'TRÍNH TRỊ', '7000', '2020-12-11', '2021-02-01', '6', '6');

INSERT INTO `mydb`.`users` (`USER_PHONE`, `USER_NAME`, `PASSWORD`, `EMAIL`, `LIKED_USER_ID`) VALUES ('0962043769', 'TUANVM', '123456', 'TUAN@GMAIL.COM','1');
INSERT INTO `mydb`.`users` (`USER_PHONE`, `USER_NAME`, `PASSWORD`, `EMAIL`, `LIKED_USER_ID`) VALUES ('0983679556', 'TIEUHT', '123456', 'TRIEU@GMAI.COM','2');
INSERT INTO `mydb`.`users` (`USER_PHONE`, `USER_NAME`, `PASSWORD`, `EMAIL`, `LIKED_USER_ID`) VALUES ('0976120574', 'HIEUTM', '123456', 'HIEU@GMAIL.COM', '3');
INSERT INTO `mydb`.`users` (`USER_PHONE`, `USER_NAME`, `PASSWORD`, `EMAIL`, `LIKED_USER_ID`) VALUES ('0142565789', 'TRANGNT', '123456', 'TRANG12@GMAIL.COM', '4');
INSERT INTO `mydb`.`users` (`USER_PHONE`, `USER_NAME`, `PASSWORD`, `EMAIL`, `LIKED_USER_ID`) VALUES ('0987812598', 'QUANCH', '123456', 'QUAN34@GMAIL.COM', '5');
INSERT INTO `mydb`.`users` (`USER_PHONE`, `USER_NAME`, `PASSWORD`, `EMAIL`, `LIKED_USER_ID`) VALUES ('0987859877', 'KHAITM', '123456', 'KHAI34@GMAIL.COM', '6');

INSERT INTO `mydb`.`liked` (`USER_ID`,`USER_NAME`, `QUANTITY`,`BOOK_NAME`) VALUES ('1','TUANVM', '3','VĂN HỌC');
INSERT INTO `mydb`.`liked` (`USER_ID`,`USER_NAME`, `QUANTITY`,`BOOK_NAME`) VALUES ('2','TIEUHT', '1','SÁT THỦ VÀ CÔ GÁI');
INSERT INTO `mydb`.`liked` (`USER_ID`,`USER_NAME`, `QUANTITY`,`BOOK_NAME`) VALUES ('3','HIEUTM', '12','YÊU KHÔNG CẦN NÓI');
INSERT INTO `mydb`.`liked` (`USER_ID`,`USER_NAME`, `QUANTITY`,`BOOK_NAME`) VALUES ('4','TRANGTH', '2','GIỌT ĐẮNG');
INSERT INTO `mydb`.`liked` (`USER_ID`,`USER_NAME`, `QUANTITY`,`BOOK_NAME`) VALUES ('5','QUANCH', '3','LỆ RƠI');
INSERT INTO `mydb`.`liked` (`USER_ID`,`USER_NAME`, `QUANTITY`,`BOOK_NAME`) VALUES ('6','KHAITM', '3','BÀN VỀ CÁCH DÙNG BINH');

INSERT INTO `mydb`.`own` (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`) VALUES ('0962043769', '1');
INSERT INTO `mydb`.`own` (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`) VALUES ('0983679556', '2');
INSERT INTO `mydb`.`own` (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`) VALUES ('0976120574', '3');
INSERT INTO `mydb`.`own` (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`) VALUES ('0142565789', '4');
INSERT INTO `mydb`.`own` (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`) VALUES ('0987812598', '5');
INSERT INTO `mydb`.`own` (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`) VALUES ('0987859877', '6');

ALTER TABLE `mydb`.`published_year` 
CHANGE COLUMN `PUBLISHED_YEAR` `PUBLISHED_YEAR` DATE NULL DEFAULT NULL ;



INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('1', '2020-12-12', '10', 'HÀ NỘI', 'VĂN HỌC');
INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('2', '2020-11-12 ', '15', 'HẢI PHÒNG', 'SÁT THỦ VÀ CÔ GÁI');
INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('3', '2019-10-10 ', '12', 'HÀ NAM', 'YÊU KHÔNG CẦN NÓI');
INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('4', '2021-05-01', '10', 'HẢI PHÒNG', 'GIỌT ĐẮNG');
INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('5', '2021-06-01', '30', 'HẢI PHÒNG', 'LỆ RƠI');
INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('6', '2020-05-07', '100', 'HÀ NỘI', 'BÀN VỀ CÁCH DÙNG BINH');


INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_SUBCATEGORY_ID`) VALUES ('1', '1');
INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_SUBCATEGORY_ID`) VALUES ('2', '2');
INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_SUBCATEGORY_ID`) VALUES ('3', '3');
INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_SUBCATEGORY_ID`) VALUES ('4', '4');
INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_SUBCATEGORY_ID`) VALUES ('5', '5');
INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_SUBCATEGORY_ID`) VALUES ('6', '6');

INSERT INTO `mydb`.`subcategory` (`SUBCATEGORY_ID`,`BOOK_ID`,`NAME`) VALUES ('1','1','CHIẾN LƯỢC');
INSERT INTO `mydb`.`subcategory` (`SUBCATEGORY_ID`,`BOOK_ID`,`NAME`) VALUES ('2','2','KINH DỊ');
INSERT INTO `mydb`.`subcategory` (`SUBCATEGORY_ID`,`BOOK_ID`,`NAME`) VALUES ('3','3','TIỂU THUYẾT');
INSERT INTO `mydb`.`subcategory` (`SUBCATEGORY_ID`,`BOOK_ID`,`NAME`) VALUES ('4','4','TRINH THÁM');
INSERT INTO `mydb`.`subcategory` (`SUBCATEGORY_ID`,`BOOK_ID`,`NAME`) VALUES ('5','5','TRÍNH TRỊ');
INSERT INTO `mydb`.`subcategory` (`SUBCATEGORY_ID`,`BOOK_ID`,`NAME`) VALUES ('6','6','VĂN HỌC');




SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
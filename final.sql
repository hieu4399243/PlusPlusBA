-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`USERS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`USERS` (
  `USER_PHONE` INT NOT NULL,
  `USER_NAME` VARCHAR(45) NULL,
  `PASSWORD` VARCHAR(45) NULL,
  `EMAIL` VARCHAR(45) NULL,
  `LIKED_USER_NAME` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`USER_PHONE`),
  INDEX `fk_USERS_LIKED1_idx` (`LIKED_USER_NAME` ASC) VISIBLE,
  CONSTRAINT `fk_USERS_LIKED1`
    FOREIGN KEY (`LIKED_USER_NAME`)
    REFERENCES `mydb`.`LIKED` (`USER_NAME`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`AUTHOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`AUTHOR` (
  `BOOK_ID` INT NOT NULL,
  `NAME_AUTHOR` VARCHAR(45) NULL,
  `ADDRESS` VARCHAR(45) NULL,
  `EMAIL` VARCHAR(45) NULL,
  PRIMARY KEY (`BOOK_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`PUBLISHED_YEAR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PUBLISHED_YEAR` (
  `BOOK_ID` INT NOT NULL,
  `PUBLISHED_YEAR` YEAR(4) NULL,
  `QUANTILY` INT NULL,
  `ADDRESS` VARCHAR(45) NULL,
  `BOOK_NAME` VARCHAR(45) NULL,
  PRIMARY KEY (`BOOK_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`BOOKS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`BOOKS` (
  `BOOK_ID` INT NOT NULL,
  `NAME` VARCHAR(45) NULL,
  `TITTLE` VARCHAR(45) NULL,
  `DECRIPTION` VARCHAR(45) NULL,
  `PRICE` BIGINT NULL,
  `UPDATE_TIME` TIMESTAMP NULL,
  `LAST_UPDATED` TIMESTAMP NULL,
  `AUTHOR_BOOK_ID` INT NOT NULL,
  `PUBLISHED_YEAR_BOOK_ID` INT NOT NULL,
  PRIMARY KEY (`BOOK_ID`),
  INDEX `fk_BOOKS_AUTHOR1_idx` (`AUTHOR_BOOK_ID` ASC) VISIBLE,
  INDEX `fk_BOOKS_PUBLISHED_YEAR1_idx` (`PUBLISHED_YEAR_BOOK_ID` ASC) VISIBLE,
  CONSTRAINT `fk_BOOKS_AUTHOR1`
    FOREIGN KEY (`AUTHOR_BOOK_ID`)
    REFERENCES `mydb`.`AUTHOR` (`BOOK_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_BOOKS_PUBLISHED_YEAR1`
    FOREIGN KEY (`PUBLISHED_YEAR_BOOK_ID`)
    REFERENCES `mydb`.`PUBLISHED_YEAR` (`BOOK_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SUBCATEGORY`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`SUBCATEGORY` (
  `BOOK_ID` INT NOT NULL,
  `NAME` VARCHAR(45) NULL,
  PRIMARY KEY (`BOOK_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`LIKED`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`LIKED` (
  `USER_NAME` VARCHAR(45) NOT NULL,
  `QUANTITY` INT NULL,
  PRIMARY KEY (`USER_NAME`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`USERS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`USERS` (
  `USER_PHONE` INT NOT NULL,
  `USER_NAME` VARCHAR(45) NULL,
  `PASSWORD` VARCHAR(45) NULL,
  `EMAIL` VARCHAR(45) NULL,
  `LIKED_USER_NAME` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`USER_PHONE`),
  INDEX `fk_USERS_LIKED1_idx` (`LIKED_USER_NAME` ASC) VISIBLE,
  CONSTRAINT `fk_USERS_LIKED1`
    FOREIGN KEY (`LIKED_USER_NAME`)
    REFERENCES `mydb`.`LIKED` (`USER_NAME`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SUB_BOOK`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`SUB_BOOK` (
  `SUBCATEGORY_BOOK_ID` INT NOT NULL,
  `BOOKS_BOOK_ID` INT NOT NULL,
  INDEX `fk_SUB_BOOK_SUBCATEGORY1_idx` (`SUBCATEGORY_BOOK_ID` ASC) VISIBLE,
  INDEX `fk_SUB_BOOK_BOOKS1_idx` (`BOOKS_BOOK_ID` ASC) VISIBLE,
  CONSTRAINT `fk_SUB_BOOK_SUBCATEGORY1`
    FOREIGN KEY (`SUBCATEGORY_BOOK_ID`)
    REFERENCES `mydb`.`SUBCATEGORY` (`BOOK_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_SUB_BOOK_BOOKS1`
    FOREIGN KEY (`BOOKS_BOOK_ID`)
    REFERENCES `mydb`.`BOOKS` (`BOOK_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`OWN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`OWN` (
  `USERS_USER_PHONE` INT NOT NULL,
  `BOOKS_BOOK_ID` INT NOT NULL,
  PRIMARY KEY (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`),
  INDEX `fk_OWN_BOOKS1_idx` (`BOOKS_BOOK_ID` ASC) VISIBLE,
  CONSTRAINT `fk_OWN_USERS1`
    FOREIGN KEY (`USERS_USER_PHONE`)
    REFERENCES `mydb`.`USERS` (`USER_PHONE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OWN_BOOKS1`
    FOREIGN KEY (`BOOKS_BOOK_ID`)
    REFERENCES `mydb`.`BOOKS` (`BOOK_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

INSERT INTO `mydb`.`author` (`BOOK_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('1', 'NGUYỄN DU', 'HẢI PHÒNG', 'DU123@GMAIL.COM');
INSERT INTO `mydb`.`author` (`BOOK_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('2', 'NGUYỄN TRÃI', 'HÀ NỘI', 'TRAINX@GMAIL.COM');
INSERT INTO `mydb`.`author` (`BOOK_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('3', 'DA CÁT LƯỢNG', 'TỨ XUYÊN', 'LUONG1234@GMAIL.COM');
INSERT INTO `mydb`.`author` (`BOOK_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('4', 'LƯU BỊ', 'TỨ XUYÊN', 'LUUB24@GMAIL.COM');
INSERT INTO `mydb`.`author` (`BOOK_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('5', 'QUAN VŨ', 'GIANG ĐÔNG', 'VU@GMAIL.COM');
INSERT INTO `mydb`.`author` (`BOOK_ID`, `NAME_AUTHOR`, `ADDRESS`, `EMAIL`) VALUES ('6', 'TÔN QUYỀN', 'GIANG ĐÔNG', 'QUYEN@GMAIL.COM');

INSERT INTO `mydb`.`books` (`BOOK_ID`, `NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_BOOK_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('1', 'VAN HOC', 'VAN', 'TIEU THUYET', '5000', '2020-11-12 ', '2020-12-15 ', '1', '1');
INSERT INTO `mydb`.`books` (`BOOK_ID`, `NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_BOOK_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('2', 'SAT THU VA CO GAI', 'VAN', 'TRINH THAM', '9000', '2019-05-10', '2019-06-12', '2', '2');
INSERT INTO `mydb`.`books` (`BOOK_ID`, `NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_BOOK_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('3', 'YEU KHONG CAN NOI', 'VAN', 'NGON TINH', '8000', '2020-05-12', '2020-07-12', '3', '3');
INSERT INTO `mydb`.`books` (`BOOK_ID`, `NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_BOOK_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('4', 'GIOT DANG', 'VAN', 'TIEU THUYET', '10000', '2020-05-13', '2021-06-12', '4', '4');
INSERT INTO `mydb`.`books` (`BOOK_ID`, `NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_BOOK_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('5', 'LE ROI', 'VAN', 'NGON TINH', '6000', '2020-11-10', '2021-01-01', '5', '5');
INSERT INTO `mydb`.`books` (`BOOK_ID`, `NAME`, `TITTLE`, `DECRIPTION`, `PRICE`, `UPDATE_TIME`, `LAST_UPDATED`, `AUTHOR_BOOK_ID`, `PUBLISHED_YEAR_BOOK_ID`) VALUES ('6', 'BAN VA CACH DUNG BINH', 'TRINH TRI', 'TRINH TRI', '7000', '2020-12-11', '2021-02-01', '6', '6');


INSERT INTO `mydb`.`liked` (`USER_NAME`, `QUANTITY`) VALUES ('HIEU', '3');
INSERT INTO `mydb`.`liked` (`USER_NAME`, `QUANTITY`) VALUES ('QUAN', '1');
INSERT INTO `mydb`.`liked` (`USER_NAME`, `QUANTITY`) VALUES ('TIEU', '12');
INSERT INTO `mydb`.`liked` (`USER_NAME`, `QUANTITY`) VALUES ('TRANG', '2');
INSERT INTO `mydb`.`liked` (`USER_NAME`, `QUANTITY`) VALUES ('TUAN', '3');

INSERT INTO `mydb`.`own` (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`) VALUES ('0962043769', '1');
INSERT INTO `mydb`.`own` (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`) VALUES ('0983679556', '2');
INSERT INTO `mydb`.`own` (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`) VALUES ('0976120574', '3');
INSERT INTO `mydb`.`own` (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`) VALUES ('0142565789', '4');
INSERT INTO `mydb`.`own` (`USERS_USER_PHONE`, `BOOKS_BOOK_ID`) VALUES ('098781259', '5');

INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('1', '2020-12-12 ', '10', 'HÀ NỘI', 'VAN HOC');
INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('2', '2020-11-12 ', '15', 'HẢI PHÒNG', 'SAT THU VA CO GAI');
INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('3', '2019-10-10 ', '12', 'HÀ NAM', 'YEU KHONG CAN NOI');
INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('4', '2021-05-01', '10', 'HẢI PHÒNG', 'GIOT DANG');
INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('5', '2021-06-01', '30', 'HẢI PHÒNG', 'LE ROI');
INSERT INTO `mydb`.`published_year` (`BOOK_ID`, `PUBLISHED_YEAR`, `QUANTILY`, `ADDRESS`, `BOOK_NAME`) VALUES ('6', '2020-05-07', '100', 'HÀ NỘI', 'BAN VA CACH DUNG BINH');

INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_NAME`) VALUES ('1', 'TRINH THÁM');
INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_NAME`) VALUES ('2', 'TIỂU THUYẾT');
INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_NAME`) VALUES ('3', 'VĂN HỌC');
INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_NAME`) VALUES ('4', 'KINH DỊ');
INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_NAME`) VALUES ('5', 'TIỂU THUYẾT');
INSERT INTO `mydb`.`sub_book` (`BOOKS_BOOK_ID`, `SUBCATEGORY_NAME`) VALUES ('6', 'TIỂU THUYẾT');

UPDATE `mydb`.`sub_book` SET `SUBCATEGORY_NAME` = 'CHIẾN LƯỢC' WHERE (`BOOKS_BOOK_ID` = '1') and (`SUBCATEGORY_NAME` = 'TRINH THÁM');
UPDATE `mydb`.`sub_book` SET `SUBCATEGORY_NAME` = 'KINH DỊ' WHERE (`BOOKS_BOOK_ID` = '2') and (`SUBCATEGORY_NAME` = 'TIỂU THUYẾT');
UPDATE `mydb`.`sub_book` SET `SUBCATEGORY_NAME` = 'TIỂU THUYẾT' WHERE (`BOOKS_BOOK_ID` = '3') and (`SUBCATEGORY_NAME` = 'VĂN HỌC');
UPDATE `mydb`.`sub_book` SET `SUBCATEGORY_NAME` = 'TRINH THÁM' WHERE (`BOOKS_BOOK_ID` = '4') and (`SUBCATEGORY_NAME` = 'KINH DỊ');
UPDATE `mydb`.`sub_book` SET `SUBCATEGORY_NAME` = 'TRÍNH TRỊ' WHERE (`BOOKS_BOOK_ID` = '5') and (`SUBCATEGORY_NAME` = 'TIỂU THUYẾT');
UPDATE `mydb`.`sub_book` SET `SUBCATEGORY_NAME` = 'VĂN HỌC' WHERE (`BOOKS_BOOK_ID` = '6') and (`SUBCATEGORY_NAME` = 'TIỂU THUYẾT');


INSERT INTO `mydb`.`subcategory` (`NAME`) VALUES ('CHIẾN LƯỢC');
INSERT INTO `mydb`.`subcategory` (`NAME`) VALUES ('KINH DỊ');
INSERT INTO `mydb`.`subcategory` (`NAME`) VALUES ('TIỂU THUYẾT');
INSERT INTO `mydb`.`subcategory` (`NAME`) VALUES ('TRINH THÁM');
INSERT INTO `mydb`.`subcategory` (`NAME`) VALUES ('TRÍNH TRỊ');
INSERT INTO `mydb`.`subcategory` (`NAME`) VALUES ('VĂN HỌC');

INSERT INTO `mydb`.`users` (`USER_PHONE`, `USER_NAME`, `PASSWORD`, `EMAIL`, `LIKED_USER_NAME`) VALUES ('098781259', 'TUANVM', '123456', 'TUAN@GMAIL.COM', 'TUAN');
INSERT INTO `mydb`.`users` (`USER_PHONE`, `USER_NAME`, `PASSWORD`, `EMAIL`, `LIKED_USER_NAME`) VALUES ('0142565789', 'TIEUHT', '123456', 'TRIEU@GMAI.COM', 'TIEU');
INSERT INTO `mydb`.`users` (`USER_PHONE`, `USER_NAME`, `PASSWORD`, `EMAIL`, `LIKED_USER_NAME`) VALUES ('0962043769', 'HIEUTM', '123456', 'HIEU@GMAIL.COM', 'HIEU');
INSERT INTO `mydb`.`users` (`USER_PHONE`, `USER_NAME`, `PASSWORD`, `EMAIL`, `LIKED_USER_NAME`) VALUES ('0976120574', 'TRANGNT', '123456', 'TRANG12@GMAIL.COM', 'TRANG');
INSERT INTO `mydb`.`users` (`USER_PHONE`, `USER_NAME`, `PASSWORD`, `EMAIL`, `LIKED_USER_NAME`) VALUES ('0983679556', 'QUANCH', '123456', 'QUAN34@GMAIL.COM', 'QUAN');









SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;


